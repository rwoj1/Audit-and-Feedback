<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Deprescribing Taper Scheduler</title>
  <link rel="stylesheet" href="./styles.css?v=1"/>
  <!-- PDF export -->
  <script src="https://cdn.jsdelivr.net/npm/html2pdf.js@0.10.1/dist/html2pdf.bundle.min.js"></script>
</head>
<body>
  <header class="site-header">
    <h1>Deprescribing Taper Scheduler</h1>
    <p class="subtitle">Create a plain-English taper plan, printable as a chart or PDF.</p>
  </header>

  <main class="container">
    <!-- Inputs -->
    <section class="card">
      <h2>Medicine Chart Input</h2>
      <div class="grid">
        <label>Medicine Class
          <select id="classSelect"></select>
        </label>
        <label>Medicine
          <select id="medicineSelect"></select>
        </label>
        <label>Form
          <select id="formSelect"></select>
        </label>
        <label>Strength
          <select id="strengthSelect"></select>
        </label>
        <label>Frequency
          <select id="frequencySelect">
            <option value="1">Once daily (morning)</option>
            <option value="2">Twice daily (morning & night)</option>
            <option value="3">Three times daily</option>
            <option value="4">Four times daily</option>
          </select>
        </label>
        <label>How long have you been on this medicine?
          <select id="durationSelect">
            <option value="">Select…</option>
            <option value="<3">&lt; 3 months</option>
            <option value=">3">&gt; 3 months</option>
          </select>
        </label>

        <!-- Phase controls -->
        <div class="phase">
          <h3>Taper controls</h3>
          <div class="phase-row">
            <div>
              <strong>Phase 1</strong><br/>
              <label>Reduce by (%)<input id="p1Percent" type="number" min="1" max="90" value="25"/></label>
              <label>Every (days)<input id="p1Interval" type="number" min="1" max="56" value="14"/></label>
            </div>
            <div>
              <label>Stop Phase 1 at dose
                <input id="p1StopDose" type="number" min="0" step="0.125" placeholder="e.g., 5"/>
              </label>
              <div class="or">or</div>
              <label>Stop Phase 1 at week #
                <input id="p1StopWeek" type="number" min="1" placeholder="e.g., 6"/>
              </label>
            </div>
          </div>

          <div class="phase-row">
            <div>
              <strong>Phase 2</strong><br/>
              <label>Reduce by (%)<input id="p2Percent" type="number" min="1" max="90" value="12.5"/></label>
              <label>Every (days)<input id="p2Interval" type="number" min="1" max="56" value="14"/></label>
            </div>
            <div class="phase-note">
              Leave Phase 2 blank if you only want a single-phase taper.
            </div>
          </div>
        </div>

        <label>Start date
          <input id="startDate" type="date"/>
        </label>
        <label>Next review date (optional)
          <input id="reviewDate" type="date"/>
        </label>
      </div>

      <div id="bestPracticeBox" class="advice muted"></div>

      <div class="actions">
        <button id="generateBtn">Generate Chart</button>
        <button id="printBtn" class="secondary">Print</button>
        <button id="savePdfBtn" class="secondary">Save as PDF</button>
        <button id="resetBtn" class="secondary">Reset</button>
      </div>
    </section>

    <!-- Patient details -->
    <section class="card">
      <h2>Patient & Details</h2>
      <div class="grid">
        <label>Patient name
          <input id="patientName" type="text" placeholder="e.g., Alex Smith"/>
        </label>
        <label>Allergies
          <input id="allergies" type="text" placeholder="e.g., NKDA"/>
        </label>
        <label>Health professional
          <input id="hcpName" type="text" placeholder="e.g., Dr Patel / Pharmacist Jones"/>
        </label>
      </div>
      <p class="hint">Doses will be written plainly, e.g. “Take 1 tablet in the morning”.</p>
    </section>

    <!-- Output -->
    <section class="card" id="outputCard">
      <div class="plan-header">
        <div class="badge big" id="hdrPatient">Patient: –</div>
        <div class="badge big" id="hdrAllergies">Allergies: –</div>
        <div class="badge big" id="hdrHcp">HCP: –</div>
        <div class="badge big" id="hdrMedicine">Medicine: –</div>
        <div class="special-instructions" id="hdrSpecial">Special instructions: –</div>
      </div>

      <div id="scheduleBlock" class="schedule-wrapper"></div>

      <details class="images-note">
        <summary>Your tablet/capsule/patch may look like…</summary>
        <p>Place images in <code>/images</code>, named <code>medicine_strength.jpg</code>.</p>
      </details>
    </section>
  </main>

  <footer class="site-footer">
    <p><strong>Evidence & labelling</strong></p>
    <ul>
      <li>Plain-English directions per the National Standard for Labelling Dispensed Medicines.</li>
      <li>If a tablet must be swallowed whole: “Swallow whole, do not halve or crush”.</li>
    </ul>
    <p>For educational/clinical support use only. Not for commercial use.</p>
  </footer>

  <script src="./script.js?v=1"></script>
</body>
</html>
